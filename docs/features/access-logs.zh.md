# 访问日志

## 概述

Website Defender 记录所有经过的请求，提供完整的访问审计能力。访问日志是安全分析和故障排查的重要数据来源。

## 记录字段

每条访问日志包含以下信息：

| 字段 | 说明 |
|------|------|
| **客户端 IP** | 发起请求的客户端 IP 地址 |
| **请求方法** | HTTP 方法（GET、POST、PUT、DELETE 等） |
| **请求路径** | 请求的 URL 路径 |
| **状态码** | HTTP 响应状态码 |
| **延迟** | 请求处理耗时 |
| **User-Agent** | 客户端 User-Agent 标识 |
| **动作** | 处理结果（放行/拦截） |

## 仪表盘分析

管理后台提供直观的访问日志分析功能：

### 统计概览

- **总请求数**：统计时间范围内的所有请求数量
- **拦截请求数**：被安全策略拦截的请求数量

### Top 10 IP

展示被拦截次数最多的前 10 个 IP 地址，帮助快速识别潜在的恶意来源。

### 筛选功能

支持多维度组合筛选：

- **按 IP 地址筛选**：查看特定 IP 的请求记录
- **按动作筛选**：仅查看放行或拦截的记录
- **按状态码筛选**：查看特定状态码的请求
- **按时间范围筛选**：查看指定时间段的记录

!!! tip "安全建议"
    建议定期查看访问日志，关注以下异常模式：

    - 同一 IP 的大量失败请求
    - 频繁触发 WAF 规则的 IP
    - 异常时间段的请求高峰
    - 来自异常地区的请求

## API 访问

访问日志也可以通过 API 查询：

| 方法 | 路径 | 说明 |
|------|------|------|
| `GET` | `/access-logs` | 查询访问日志列表 |
| `GET` | `/access-logs/stats` | 获取访问日志统计数据 |

详见 [API 参考](../api-reference/index.md)。

## 威胁检测集成

访问日志中间件实时向[威胁检测](threat-detection.md)引擎提供请求数据。每个请求的状态码和速率限制状态都会被分析，用于计算每个 IP 的动态威胁评分。这使得：

- 检测到异常模式时自动封禁 IP
- 对可疑 IP 动态激活 [JS 挑战](js-challenge.md)
- 记录[安全事件](security-events.md)用于审计

---

## 相关页面

- [威胁检测](threat-detection.md) -- 基于访问日志的自动化威胁检测
- [WAF 规则](waf.md) -- 了解 WAF 拦截规则
- [IP 黑白名单](ip-lists.md) -- IP 访问控制
- [API 参考](../api-reference/index.md) -- 访问日志查询 API
